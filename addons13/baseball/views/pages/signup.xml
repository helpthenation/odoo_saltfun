<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>


<template id="reset_password" name="Reset password" inherit_id="auth_signup.reset_password">
  <xpath expr="//t[@t-call='auth_signup.fields']" position="before">
    <t t-set="signup" t-value="{}"/>
  </xpath>
</template>



<template id="login_layout" name="Signup" inherit_id="website.login_layout">
  <xpath expr="//div[@class='oe_website_login_container']" position="attributes">
    <attribute name="class">oe_website_login_container panel</attribute>
  </xpath>
</template>

<template id="auth_signup.update_profile" name="Update profile">
    <t t-call="web.login_layout">
        <form class="oe_signup_form" role="form" method="post" enctype="multipart/form-data" t-if="not message">

            <t t-call="auth_signup.fields">
                <t t-set="only_update" t-value="1"/>
            </t>

            <p class="alert alert-danger" t-if="error">
                <t t-esc="error"/>
            </p>
            <input type="hidden" name="redirect" t-att-value="redirect"/>
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <div class="clearfix oe_login_buttons">
                <t t-if="not is_active_current_season">
                  <button type="submit" class="btn btn-primary pull-left">Se reinscrire</button>
                </t>
                <t t-if="is_active_current_season">
                  <button type="submit" class="btn btn-primary pull-left">Update</button>
                </t>
            </div>

        </form>
    </t>
</template>


<template id="auth_signup.add_child" name="Add child">
    <t t-call="web.login_layout">
        <form class="oe_signup_form" role="form" method="post" enctype="multipart/form-data" t-if="not message">

            <t t-call="auth_signup.fields">
                <t t-set="only_update" t-value="1"/>
                <t t-set="add_child" t-value="1"/>
            </t>

            <p class="alert alert-danger" t-if="error">
                <t t-esc="error"/>
            </p>
            <input type="hidden" name="redirect" t-att-value="redirect"/>
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <div class="clearfix oe_login_buttons">
                <button type="submit" class="btn btn-primary pull-left">Ajouter un enfant</button>
            </div>

        </form>
    </t>
</template>

<template id="signup" name="Signup" inherit_id="auth_signup.signup">
  <xpath expr="//form[@method='post']" position="attributes">
    <attribute name="enctype">multipart/form-data</attribute>
  </xpath>
</template>

<template id="login" name="Sign up - Reset Password" inherit_id="auth_signup.login">
  <xpath expr="//a[@t-attf-href='/web/signup?{{ keep_query() }}']" position="attributes">
    <attribute name="t-attf-href">/web/signup?redirect=/profile</attribute>
  </xpath>
</template>

<template id="auth_signup.fields" name="Auth Signup/ResetPassword form fields">
        <div class="form-group field-login">
            <label for="login" class="control-label">Votre Email</label>
            <input type="text" name="login" t-att-value="signup.get('email') or login" id="login" class="form-control" autofocus="autofocus"
                required="required" t-att-readonly="'readonly' if only_passwords or only_update else None"/>
        </div>
        <t t-if="not only_passwords">
          <div class="form-group field-name">
              <label for="name" class="control-label">Votre Nom</label>
              <input type="text" name="name" t-att-value="signup.get('name')" id="name" class="form-control" placeholder="e.g. John Doe"
                  required="required" t-att-readonly="'readonly' if only_passwords else None"
                  t-att-autofocus="'autofocus' if login and not only_passwords else None" />
          </div>


          <div class="form-group field-gender">
              <label for="gender" class="control-label">Sexe</label>
              <select name="gender" t-att-value="signup.get('gender')" id="gender" class="form-control" 
                  required="required" t-att-readonly="'readonly' if only_passwords else None">
                  <option value="male">Homme</option>
                  <option value="female">Femme</option>
              </select>
          </div>

          <div class="field-birthdate">
              <label for="birthdate" class="control-label">Date de naissance</label>
              <input type="date" name="birthdate" t-att-value="signup.get('birthdate')" id="birthdate" class="form-control"
                  required="required" t-att-readonly="'readonly' if only_passwords else None"
                  t-att-autofocus="'autofocus' if login and not only_passwords else None" />
          </div>

          <div class="form-group">
              <label class="control-label" for="country_id">Nationalité</label>
              <select name="country_id" class="form-control">
                  <option value="">Nationality</option>
                  <t t-foreach="countries or []" t-as="country">
                      <option t-att-value="country.id" t-att-selected="country == signup.get('country_id')"><t t-esc="country.name"/></option>
                  </t>
              </select>
          </div>

          <div class="form-group field-is_player">
              <label for="is_player" class="control-label">Type</label>
              <select name="is_player" t-att-value="'player' if signup.get('is_player') else 'other'" id="is_player" class="form-control" 
                  required="required" t-att-readonly="'readonly' if only_passwords else None">
                  <option value="player">Joueur</option>
                  <option value="other">Autre</option>
              </select>
          </div>

          <div class="js_is_player">
  <!--           <div class="form-group field-categories">
                <label class="control-label">Categories</label>
                  <select name="categories" class="control-label js_multiselect" multiple="mutltiple">
                    <t t-foreach="categories or []" t-as="category">
                        <t t-if="category.id in signup.get('baseball_category_ids')">
                          <option t-att-value="str(category.id)" selected="selected"><span t-field="category.name"/></option>
                        </t>
                        <t t-if="not category.id in signup.get('baseball_category_ids')">
                          <option t-att-value="str(category.id)"><span t-field="category.name"/></option>
                        </t>
                    </t>
                  </select>
            </div> -->

            <div class="form-group field-teams">
                <label class="control-label">Equipes</label>
                <select name="teams" class="control-label js_multiselect" multiple="mutltiple">
                  <t t-foreach="teams or []" t-as="team">
                        <t t-if="signup.get('team_ids') and team.id in signup.get('team_ids')">
                          <option t-att-value="str(team.id)" selected="selected"><span t-field="team.name"/></option>
                        </t>
                        <t t-if="not signup.get('team_ids') or not team.id in signup.get('team_ids')">
                          <option t-att-value="str(team.id)"><span t-field="team.name"/></option>
                        </t>
                  </t>
                </select>
            </div>
          </div>





          <div class="form-group field-phone">
              <label class="control-label" for="phone">Téléphone</label>
              <input type="tel" name="phone" class="form-control" t-att-value="signup.get('phone')"/>
          </div>

          <div class="form-group field-phone">
              <label class="control-label" for="mobile">Mobile</label>
              <input type="tel" name="mobile" class="form-control" t-att-value="signup.get('mobile')"/>
          </div>

          <div class="form-group field-street">
              <label class="control-label" for="street2">Rue</label>
              <input type="text" name="street" class="form-control" t-att-value="signup.get('street')"/>
          </div>

          <div class="form-group field-street">
              <label class="control-label" for="street2">Rue</label>
              <input type="text" name="street2" class="form-control" t-att-value="signup.get('street2')"/>
          </div>

          <div class="form-group field-city">
              <label class="control-label" for="city">Ville</label>
              <input type="text" name="city" class="form-control" t-att-value="signup.get('city')"/>
          </div>
          <div class="form-group field-zip">
              <label class="control-label" for="zip">Code postal</label>
              <input type="text" name="zip" class="form-control" t-att-value="signup.get('zip')" />
          </div>

          <div class="form-group field-photo">
              <label class="control-label" for="photo">Photo</label>
              <input type="file" name="photo" class="form-control"/>
          </div>

          <div class="form-group field-registration_document js_is_player">
              <label class="control-label" for="registration_document">Certificat</label>
              <div class="row">
                <div class="col-md-6">
                  <input type="file" name="registration_document" class="form-control"/>
                </div>
                <div class="col-md-6">
                  <t t-set="season" t-value="request.env['baseball.season'].sudo().get_current_season()"/>
                  <t t-if="season and season.certificate_id">
                    <a t-att-href="'/web/content/ir.attachment/%s/datas/name' % (season.certificate_id.id)">
                        <i class="fa fa-file-pdf-o fa-2x"></i><t t-esc="season.certificate_id.name"/>
                    </a>
                  </t>
                </div>
              </div>
              <!-- <a href="/profile" role="menuitem">My Profile</a> METTRE UN LIEN VERS CURRENT SEASON-->
          </div>

          <div class="form-group field-ads_authorize">
              <label class="control-label" for="ads_authorize">Sponsor</label>
              <input type="checkbox" name="ads_authorize" class="form-control" t-att-checked="signup.get('ads_authorize')" t-att-value="signup.get('ads_authorize')"/><span>I hereby give my permission to communication of the my contact information to the club's sponsors</span>
          </div>

        </t>
        <div t-att-class="'hidden' if only_update else None">
          <div class="form-group field-password">
              <label for="password" class="control-label">Mot de passe</label>
              <input type="password" name="password" id="password" class="form-control"
                  t-att-required="'required' if not only_update else None" t-att-autofocus="'autofocus' if only_passwords else None"/>
          </div>

          <div class="form-group field-confirm_password">
              <label for="confirm_password" class="control-label">Confirmez mot de passe</label>
              <input type="password" name="confirm_password" id="confirm_password" class="form-control" t-att-required="'required' if not only_update else None"/>
          </div>
        </div>

</template>


  </data>
</odoo>