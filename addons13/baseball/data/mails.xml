<?xml version="1.0"?>
<odoo>
    <data noupdate="1">
        <record id="mail_template_game_invitation" model="mail.template">
            <field name="name">Game Invitation</field>
            <field name="email_from"></field>
            <field name="subject">${'Tournoi %s @ %s' % (object.game_id.home_team.name, object.game_id.venue.name) if object.game_id.game_type == 'tournament' else '[%s] %s @ %s' % (object.game_id.game_number, object.game_id.away_team.name, object.game_id.home_team.name)}</field>
            <field name="model_id" ref="baseball.model_baseball_game_invitation"/>
            
            <field name="partner_to">${object.partner_id.id or False }</field>
            <field name="auto_delete" eval="True"/>
            
            <field name="body_html"><![CDATA[
<style> 
    span.oe_mail_footer_access {
        display:block;    
        text-align:center;
        color:grey;
    }
</style>
<div style="border-radius: 2px; max-width: 1200px; height: auto;margin-left: auto;margin-right: auto;background-color:#f9f9f9;">
    <div style="height:auto;text-align: center;font-size : 30px;color: #8A89BA;">
        <strong>${object.game_id.game_number}</strong>
    </div>
    <div style="text-align: left;font-size : 14px;border-collapse: separate;margin-top:10px">
        <strong>${object.partner_id.name}</strong>,<br/>
        <p>Les prochains matches arrivent, il est temps de prévenir si tu es disponible ou non pour le match du ${object.game_id.start_date}.</p> 
        <br/>
% if object.game_id.game_type == 'tournament':
        <p>Le tournoi ${object.game_id.home_team.name} @ ${object.game_id.venue.name} est prévu le ${format_tz(object.game_id.start_time, tz=object.partner_id.tz, format='%d/%m/%Y')} et commence à  ${format_tz(object.game_id.start_time, tz=object.partner_id.tz, format='%H:%M')}</p>
% else:
        <p>Le match ${object.game_id.away_team.name} @ ${object.game_id.home_team.name} (${object.game_id.game_number}) est prévu le ${format_tz(object.game_id.start_time, tz=object.partner_id.tz, format='%d/%m/%Y')} à ${format_tz(object.game_id.start_time, tz=object.partner_id.tz, format='%H:%M')}</p>
% endif
    </div>

    <div style="height: auto;width:450px; margin:0 auto;padding-top:20px;padding-bottom:40px;">
            <a style="padding: 8px 30px 8px 30px;border-radius: 6px;border: 1px solid #CCCCCC;background:#8A89BA;margin : 0 15px 0 0;text-decoration: none;color:#FFFFFF;" href="/game/invitation/accept?token=${object.token}&invite_id=${object.id}">Présent</a>
            <a style="padding: 8px 30px 8px 30px;border-radius: 6px;border: 1px solid #CCCCCC;background:#808080;margin : 0 15px 0 0;text-decoration: none;color:#FFFFFF;" href="/game/invitation/decline?token=${object.token}&invite_id=${object.id}">Absent</a>

    </div> 
</div>
                ]]>
                </field>
        </record>

        <record id="mail_template_game_invitation_answer" model="mail.template">
            <field name="name">Game invitation answer</field>
            <field name="email_from"></field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
% if ctx.get('presence'):
    <p>${ctx.get('member_name')} sera présent au match ${ctx.get('game_name')}</p>
% endif
% if not ctx.get('presence'):
    <p>${ctx.get('member_name')} sera absent au match ${ctx.get('game_name')}</p>
% endif

            ]]></field>
        </record>

        <record id="mail_template_registration" model="mail.template">
            <field name="name">New registration</field>
            <field name="email_from"></field>
            <field name="subject">${'Nouvelle inscription de %s' % (object.name)}</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="auto_delete" eval="True"/>
            
            <field name="body_html"><![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">
    <p>Bonjour,</p>
    
    <p>L'inscription de ${object.name} a été enregitrée</p>
% if ctx.get('current_registration'):
        <p>Inscription pour la saison ${ctx['current_registration'].season_id.name} dans la catégorie ${ctx['current_registration'].category_id.name}</p>
% endif

</div>
            ]]></field>
        </record>


        <record id="mail_template_update_registration" model="mail.template">
            <field name="name">Update registration</field>
            <field name="email_from"></field>
            <field name="subject">${'Mise à jour de l\'inscription de %s' % (object.name)}</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="auto_delete" eval="True"/>
            
            <field name="body_html"><![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">
    <p>Bonjour,</p>
    
    <p>L'inscription de ${object.name} a été mise à jour pour la saison ${ctx.get('current_registration').season_id.name}:</p>
    <ul>
% if ctx.get('current_registration_new_vals'):
        <li>Le certificat a été mis à jour</li>
% endif
% if 'fee_paid' in ctx.get('current_registration_new_vals'):
        <li>Un paiement a été mis à jour. Le membre à payé  ${ctx.get('current_registration').fee_paid} sur ${ctx.get('current_registration').fee_to_pay}</li>
% endif
% if 'season_id' in ctx.get('current_registration_new_vals'):
        <li>La saison a été modifiée: ${ctx.get('current_registration').season_id.name}</li>
% endif
% if 'category_id' in ctx.get('current_registration_new_vals'):
        <li>La catégorie a été modifiée: ${ctx.get('current_registration').category_id.name}</li>
% endif
    </ul>
</div>
            ]]></field>
        </record>

<record id="mail_template_game_official_reminder" model="mail.template">
    <field name="name">Game Official reminder</field>
    <field name="email_from"></field>
    <field name="subject">Rappel scoring/arbitrage</field>
    <field name="model_id" ref="baseball.model_baseball_game"/>
    <field name="auto_delete" eval="True"/>
    <field name="partner_to">${('%s' % (object.scorer_ids.ids + object.umpire_ids.ids))[1:-1] or False }</field>
    <field name="body_html"><![CDATA[
<style> 
    span.oe_mail_footer_access {
        display:block;    
        text-align:center;
        color:grey;
    }
</style>
<div style="border-radius: 2px; max-width: 1200px; height: auto;margin-left: auto;margin-right: auto;background-color:#f9f9f9;">
    <div style="height:auto;text-align: center;font-size : 30px;color: #8A89BA;">
        <strong>${object.game_number}</strong>
    </div>
    <div style="text-align: left;font-size : 14px;border-collapse: separate;margin-top:10px">
        <p>Pour rappel, vous vous êtes porté volontaire pour arbitrer ou scorer le match ${object.away_team.name} @ ${object.home_team.name} (${object.game_number}) de ce ${format_tz(object.start_time, tz=object.scorer_ids[:1].tz, format='%d/%m/%Y')} à ${format_tz(object.start_time, tz=object.scorer_ids[:1].tz, format='%H:%M')}</p>
    </div>
</div>
                ]]>
    </field>
</record>

        <record model="mail.channel" id="channel_registration">
            <field name="name">Registration</field>
            <field name="group_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="description">Suivi des licences.</field>
            <field name="email_send" eval="True"/>
        </record>

    </data>
</odoo>